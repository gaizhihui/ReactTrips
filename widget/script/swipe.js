function Swipe(a,b){function n(){var a,c;for(h=g.children,k=h.length,h.length<2&&(b.continuous=!1),f.transitions&&b.continuous&&h.length<3&&(g.appendChild(h[0].cloneNode(!0)),g.appendChild(g.children[1].cloneNode(!0)),h=g.children),i=new Array(h.length),j=container.getBoundingClientRect().width||container.offsetWidth,g.style.width=h.length*j+"px",a=h.length;a--;)c=h[a],c.style.width=j+"px",c.setAttribute("data-index",a),f.transitions&&(c.style.left=a*-j+"px",s(a,l>a?-j:a>l?j:0,0));b.continuous&&f.transitions&&(s(q(l-1),-j,0),s(q(l+1),j,0)),f.transitions||(g.style.left=l*-j+"px"),container.style.visibility="visible"}function o(){b.continuous?r(l-1):l&&r(l-1)}function p(){b.continuous?r(l+1):l<h.length-1&&r(l+1)}function q(a){return(h.length+a%h.length)%h.length}function r(a,c){var d,g,k;if(l!=a){if(f.transitions){for(d=Math.abs(l-a)/(l-a),b.continuous&&(g=d,d=-i[q(a)]/j,d!==g&&(a=-d*h.length+a)),k=Math.abs(l-a)-1;k--;)s(q((a>l?a:l)-k-1),j*d,0);a=q(a),s(l,j*d,c||m),s(a,0,c||m),b.continuous&&s(q(a-d),-(j*d),0)}else a=q(a),u(l*-j,a*-j,c||m);l=a,e(b.callback&&b.callback(l,h[l]))}}function s(a,b,c){t(a,b,c),i[a]=b}function t(a,b,c){var d=h[a],e=d&&d.style;e&&(e.webkitTransitionDuration=e.MozTransitionDuration=e.msTransitionDuration=e.OTransitionDuration=e.transitionDuration=c+"ms",e.webkitTransform="translate("+b+"px, 0)"+"translateZ(0)",e.msTransform=e.MozTransform=e.OTransform="translateX("+b+"px)")}function u(a,c,d){var e,f;return d?(e=+new Date,f=setInterval(function(){var i=+new Date-e;return i>d?(g.style.left=c+"px",v&&x(),b.transitionEnd&&b.transitionEnd.call(event,l,h[l]),clearInterval(f),void 0):(g.style.left=(c-a)*(Math.floor(100*(i/d))/100)+a+"px",void 0)},4),void 0):(g.style.left=c+"px",void 0)}function x(){w=setTimeout(p,v),"stopping"==c&&y()}function y(){v=b.auto>0?b.auto:0,clearTimeout(w)}var d,e,f,g,h,i,j,k,l,m,v,w,z,A,B,C,c="ready";return container=document.getElementById(a),d=function(){},e=function(a){setTimeout(a||d,0)},f={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(a){var c,b=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(c in b)if(void 0!==a.style[b[c]])return!0;return!1}(document.createElement("swipe"))},container?(g=container.children[0],b=b||{},l=parseInt(b.startSlide,10)||0,m=b.speed||300,b.continuous=void 0!==b.continuous?b.continuous:!0,v=b.auto||0,z={},A={},B=void 0,C={handleEvent:function(a){switch(a.type){case"touchstart":this.start(a);break;case"touchmove":this.move(a);break;case"touchend":e(this.end(a));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":e(this.transitionEnd(a));break;case"resize":e(n)}b.stopPropagation&&a.stopPropagation()},start:function(a){c="stopping";var b=a.touches[0];z={x:b.pageX,y:b.pageY,time:+new Date},A={},g.addEventListener("touchmove",this,!1),g.addEventListener("touchend",this,!1)},move:function(a){if(!(a.touches.length>1||a.scale&&1!==a.scale)){b.disableScroll&&a.preventDefault();var c=a.touches[0];A={x:c.pageX-z.x,y:c.pageY-z.y},"undefined"==typeof B&&(B=!!(B||Math.abs(A.x)<Math.abs(A.y))),B||(a.preventDefault(),y(),b.continuous?(t(q(l-1),A.x+i[q(l-1)],0),t(l,A.x+i[l],0),t(q(l+1),A.x+i[q(l+1)],0)):(A.x=A.x/(!l&&A.x>0||l==h.length-1&&A.x<0?Math.abs(A.x)/j+1:1),t(l-1,A.x+i[l-1],0),t(l,A.x+i[l],0),t(l+1,A.x+i[l+1],0)))}},end:function(){var f,c=+new Date-z.time,d=Number(c)<250&&Math.abs(A.x)>20||Math.abs(A.x)>j/2,e=!l&&A.x>0||l==h.length-1&&A.x<0;b.continuous&&(e=!1),f=A.x<0,B||(d&&!e?(f?(b.continuous?(s(q(l-1),-j,0),s(q(l+2),j,0)):s(l-1,-j,0),s(l,i[l]-j,m),s(q(l+1),i[q(l+1)]-j,m),l=q(l+1)):(b.continuous?(s(q(l+1),j,0),s(q(l-2),-j,0)):s(l+1,j,0),s(l,i[l]+j,m),s(q(l-1),i[q(l-1)]+j,m),l=q(l-1)),b.callback&&b.callback(l,h[l])):b.continuous?(s(q(l-1),-j,m),s(l,0,m),s(q(l+1),j,m)):(s(l-1,-j,m),s(l,0,m),s(l+1,j,m))),B=void 0,g.removeEventListener("touchmove",C,!1),g.removeEventListener("touchend",C,!1)},transitionEnd:function(a){parseInt(a.target.getAttribute("data-index"),10)==l&&(v&&x(),b.transitionEnd&&b.transitionEnd.call(a,l,h[l]))}},n(),v&&x(),f.addEventListener?(f.touch&&g.addEventListener("touchstart",C,!1),f.transitions&&(g.addEventListener("webkitTransitionEnd",C,!1),g.addEventListener("msTransitionEnd",C,!1),g.addEventListener("oTransitionEnd",C,!1),g.addEventListener("otransitionend",C,!1),g.addEventListener("transitionend",C,!1)),window.addEventListener("resize",C,!1)):window.onresize=function(){n()},{setup:function(){n()},slide:function(a,b){y(),r(a,b)},prev:function(){y(),o()},next:function(){y(),p()},stop:function(){y()},getScroll:function(){return B},getPos:function(){return l},getNumSlides:function(){return k},kill:function(){var a,b;for(y(),g.style.width="",g.style.left="",a=h.length;a--;)b=h[a],b.style.width="",b.style.left="",f.transitions&&t(a,0,0);f.addEventListener?(g.removeEventListener("touchstart",C,!1),g.removeEventListener("webkitTransitionEnd",C,!1),g.removeEventListener("msTransitionEnd",C,!1),g.removeEventListener("oTransitionEnd",C,!1),g.removeEventListener("otransitionend",C,!1),g.removeEventListener("transitionend",C,!1),window.removeEventListener("resize",C,!1)):window.onresize=null}}):void 0}(window.jQuery||window.Zepto)&&function(a){a.fn.Swipe=function(b){return this.each(function(){a(this).data("Swipe",new Swipe(a(this)[0],b))})}}(window.jQuery||window.Zepto);
